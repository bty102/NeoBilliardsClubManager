<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cập nhật hội viên của hóa đơn</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</head>
<body>
    <div th:replace="fragments::header">

    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-2">
                <div th:replace="fragments::sidebar">

                </div>
            </div>
            <div class="col-10">
                <div th:object="${billResponse}">
                    <h3 th:text="'Mã hóa đơn: ' + *{id}"></h3>
                    <div th:if="*{member}">
                        <h4>Hội viên hiện tại:</h4>
                        <p class="ms-4" th:text="'Mã hội viên: ' + *{member.id}"></p>
                        <p class="ms-4" th:text="'Họ tên: ' + *{member.fullName}"></p>
                    </div>
                    <div th:if="*{member == null}">Chưa có hội viên</div>
                </div>
                <hr>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Mã hội viên</th>
                            <th>Họ tên</th>
                            <th>Giới tính</th>
                            <th>Ngày sinh</th>
                            <th>Email</th>
                            <th>Ảnh</th>
                            <th>Cấp độ</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="member : ${memberResponses}" th:object="${member}" th:if="${member.isLocked == false}">
                            <td th:text="*{id}"></td>
                            <td th:text="*{fullName}"></td>
                            <td th:if="*{isMale}">Nam</td>
                            <td th:if="*{!isMale}">Nữ</td>
                            <td th:text="*{#temporals.format(dateOfBirth, 'dd/MM/yyyy')}"></td>
                            <td th:text="*{email}"></td>
                            <td><img width="100" th:src="*{imagePath}"></td>
                            <td th:if="*{memberLevel}" th:text="*{memberLevel.name}"></td>
                            <td th:if="*{memberLevel == null}">Chưa có</td>
                            <td>
                                <a th:href="@{'/bills/doUpdateMember?billId=' + ${billResponse.id} + '&memberId=' + *{id}}">Chọn</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <li th:class="${'page-item ' + ((pageNumber == memberResponses.getNumber() + 1)? 'active' : '')}" th:each="pageNumber : ${#numbers.sequence(1, memberResponses.getTotalPages(), 1)}">
                            <a class="page-link" th:href="@{'bills/updateMember?billId=' + ${billResponse.id} + '&pageNumber=' + ${pageNumber}}" th:text="${pageNumber}"></a>
                        </li>
                    </ul>
                </nav>
            </div>

        </div>
    </div>

</body>
</html>